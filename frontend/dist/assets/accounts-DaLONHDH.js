const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-aY90YUt9.js","assets/index-anYD-FGg.js","assets/index-SGLETCTz.css","assets/index-CaOpr-Oa.js","assets/types-DlKe2M91.js","assets/to-serializable-transaction-CBqCJM9h.js","assets/stringify-cJu1y5js.js","assets/bundler-CYXS_Fi0.js","assets/random-Du27Yl4n.js","assets/web-connector-BxuWsPze.js","assets/oauth-CC2pU2pg.js","assets/client-scoped-storage-Bf9eqyHt.js","assets/sign-login-payload-BS5pcbMU.js","assets/eth_sendRawTransaction-DPdnXbFR.js","assets/parse-typed-data-B5i2uSeh.js","assets/controller-Br5fDtAr.js","assets/url-XFQQWSb0.js","assets/TypedData-DnI-ZWEX.js"])))=>i.map(i=>d[i]);
import{a1 as J,a2 as M,_,a3 as E,a4 as q,a5 as ye,a6 as ge,a7 as I,T as v,a8 as A,a9 as Y,aa as k,ab as Q,ac as X,ad as pe,ae as Ce,af as _e,ag as F,ah as $,U as Ie,ai as be,$ as j,Z as ee,r as Ae,e as N}from"./index-anYD-FGg.js";import{e as Ee,v as ve,s as Pe}from"./TypedData-DnI-ZWEX.js";import{t as ne,s as te,i as Se,n as Te,a as De,I as We,b as Le,B as Re,c as Oe,d as Me}from"./stringify-cJu1y5js.js";import{p as ae}from"./parse-typed-data-B5i2uSeh.js";const T="com.coinbase.wallet",qe="io.metamask",Cn="me.rainbow",_n="io.zerion.wallet";function Fe(){if(typeof navigator>"u")return!1;const e=J(navigator.userAgent);return e?e.toLowerCase().includes("android"):!1}function ke(){if(typeof navigator>"u")return!1;const e=J(navigator.userAgent);return e?e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function $e(){return Fe()||ke()}function je(e){if(window!==window.top)window.open(e);else if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.location.href=e}function Ne(e){const{createOptions:a}=e,t=M();let c,n;function s(){c=void 0,n=void 0}let r=async()=>{},d=async o=>{n=o};const l=t.subscribe("chainChanged",o=>{n=o}),f=t.subscribe("disconnect",()=>{s(),l(),f()});return t.subscribe("accountChanged",o=>{c=o}),{id:T,subscribe:t.subscribe,getChain(){if(n)return n=q(n.id)||n,n},getConfig:()=>a,getAccount:()=>c,autoConnect:async o=>{const{autoConnectCoinbaseWalletSDK:u}=await _(async()=>{const{autoConnectCoinbaseWalletSDK:m}=await Promise.resolve().then(()=>z);return{autoConnectCoinbaseWalletSDK:m}},void 0),y=await e.providerFactory(),[i,h,w,g]=await u(o,t,y);return c=i,n=h,r=w,d=g,E({client:o.client,walletType:T,walletAddress:c.address,chainId:n.id}),c},connect:async o=>{const{connectCoinbaseWalletSDK:u}=await _(async()=>{const{connectCoinbaseWalletSDK:m}=await Promise.resolve().then(()=>z);return{connectCoinbaseWalletSDK:m}},void 0),y=await e.providerFactory(),[i,h,w,g]=await u(o,t,y);return c=i,n=h,r=w,d=g,E({client:o.client,walletType:T,walletAddress:c.address,chainId:n.id}),c},disconnect:async()=>{s(),await r()},switchChain:async o=>{await d(o)},onConnectRequested:async()=>{var o;if(e.onConnectRequested){const u=await e.providerFactory();return(o=e.onConnectRequested)==null?void 0:o.call(e,u)}}}}function ce(e){return Ve(e).map(a=>{try{const t=new URL(a);return t.hostname.endsWith(".thirdweb.com")&&(t.pathname="",t.search=""),t.toString()}catch{return a}})}function Ve(e,a,t="http"){const c=[];for(const n of e.rpc)t==="http"&&!n.startsWith("http")||t==="ws"&&!n.startsWith("ws")||(n.includes("${THIRDWEB_API_KEY}")?c.push(n.replace("${THIRDWEB_API_KEY}","")):n.includes("${")||c.push(n));if(c.length===0)throw new Error(`No RPC available for chainId "${e.chainId}" with mode ${t}`);return c}function Ue(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}function ze(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function se(){return!Ue()&&!ze()}function V(){if(!se())return{name:"thirdweb powered dApp",url:"https://thirdweb.com",description:"thirdweb powered dApp",logoUrl:"https://thirdweb.com/favicon.ico"};const{protocol:e,hostname:a,port:t}=window.location;let c=`${e}//${a}`;t&&t!=="80"&&t!=="443"&&(c+=`:${t}`);const n=`${c}/favicon.ico`;return{name:window.document.title||"thirdweb powered dApp",url:c,description:window.document.title||"thirdweb powered dApp",logoUrl:n}}function P(e){return typeof e=="number"?e:ye(e)?ge(e):typeof e=="bigint"?Number(e):Number.parseInt(e,10)}async function re(e){var a,t;await((t=(a=e==null?void 0:e.communicator)==null?void 0:a.waitForPopupLoaded)==null?void 0:t.call(a))}const Ke=Object.freeze(Object.defineProperty({__proto__:null,showCoinbasePopup:re},Symbol.toStringTag,{value:"Module"}));let L;async function oe(e){var a,t;if(!L){let c=(await _(()=>import("./index-aY90YUt9.js"),__vite__mapDeps([0,1,2]))).default;typeof c!="function"&&typeof c.default=="function"&&(c=c.default);const s=new c({appName:((a=e==null?void 0:e.appMetadata)==null?void 0:a.name)||V().name,appChainIds:e!=null&&e.chains?e.chains.map(r=>r.id):void 0,appLogoUrl:((t=e==null?void 0:e.appMetadata)==null?void 0:t.logoUrl)||V().logoUrl}).makeWeb3Provider(e==null?void 0:e.walletConfig);return L=s,s}return L}function U({provider:e,address:a,client:t}){const c={address:I(a),async sendTransaction(n){const s=await e.request({method:"eth_sendTransaction",params:[{accessList:n.accessList,value:n.value?A(n.value):void 0,gas:n.gas?A(n.gas):void 0,from:I(a),to:n.to,data:n.data}]});return ne({client:t,chainId:n.chainId,walletAddress:I(a),walletType:T,transactionHash:s,contractAddress:n.to??void 0,gasPrice:n.gasPrice}),{transactionHash:s}},async signMessage({message:n}){if(!c.address)throw new Error("Provider not setup");const s=typeof n=="string"?Q(n):n.raw instanceof Uint8Array?X(n.raw):n.raw,r=await e.request({method:"personal_sign",params:[s,c.address]});if(!k(r))throw new Error("Invalid signature returned");return r},async signTypedData(n){if(!c.address)throw new Error("Provider not setup");const{domain:s,message:r,primaryType:d}=ae(n),l={EIP712Domain:Ee(s),...n.types};ve({domain:s,message:r,primaryType:d,types:l});const f=Pe({domain:s??{},message:r,primaryType:d,types:l}),o=await e.request({method:"eth_signTypedData_v4",params:[c.address,f]});if(!k(o))throw new Error("Invalid signed payload returned");return o},onTransactionRequested:async()=>{await re(e)}};return c}function ie(e,a,t,c,n){const s=U({provider:t,address:e,client:n});async function r(){t.removeListener("accountsChanged",l),t.removeListener("chainChanged",f),t.removeListener("disconnect",d),await t.disconnect()}async function d(){r(),c.emit("disconnect",void 0)}function l(o){if(o[0]){const u=U({provider:t,address:I(o[0]),client:n});c.emit("accountChanged",u),c.emit("accountsChanged",o)}else d()}function f(o){const u=v(P(o));c.emit("chainChanged",u)}return t.on("accountsChanged",l),t.on("chainChanged",f),t.on("disconnect",d),[s,a,d,o=>de(t,o)]}async function He(e,a,t){const c=await t.request({method:"eth_requestAccounts"});if(!c[0])throw new Error("No accounts found");const n=I(c[0]),s=await t.request({method:"eth_chainId"}),r=P(s);let d=e.chain&&e.chain.id===r?e.chain:v(r);return r&&(e!=null&&e.chain)&&r!==(e==null?void 0:e.chain.id)&&(await de(t,e.chain),d=e.chain),ie(n,d,t,a,e.client)}async function Be(e,a,t){const n=(await t.request({method:"eth_accounts"}))[0];if(!n)throw new Error("No accounts found");const s=await t.request({method:"eth_chainId"}),r=P(s),d=e.chain&&e.chain.id===r?e.chain:v(r);return ie(n,d,t,a,e.client)}async function de(e,a){var c;const t=A(a.id);try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(n){const s=await Y(a);(n==null?void 0:n.code)===4902&&await e.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:s.name,nativeCurrency:s.nativeCurrency,rpcUrls:ce(s),blockExplorerUrls:((c=s.explorers)==null?void 0:c.map(r=>r.url))||[]}]})}}const z=Object.freeze(Object.defineProperty({__proto__:null,autoConnectCoinbaseWalletSDK:Be,connectCoinbaseWalletSDK:He,getCoinbaseWebProvider:oe},Symbol.toStringTag,{value:"Module"}));async function Ge(e){return pe(async()=>{var c;const t=await(await fetch(`${Ce("inAppWallet")}/api/2024-05-05/ecosystem-wallet`,{headers:{"x-ecosystem-id":e}})).json();if(!t||t.code==="UNAUTHORIZED")throw new Error(t.message||`Could not find ecosystem wallet with id ${e}, please check your ecosystem wallet configuration.`);return(c=t.authOptions)!=null&&c.includes("siwe")&&(t.authOptions=t.authOptions.filter(n=>n!=="siwe"),t.authOptions.push("wallet")),t},{cacheKey:`ecosystem-wallet-options-${e}`,cacheTime:1e3*60*5})}const R=new Map;async function D(e,a,t){var s;const c=_e({clientId:e.clientId,ecosystem:t,partialSecretKey:(s=e.secretKey)==null?void 0:s.slice(0,5)});if(R.has(c))return R.get(c);const n=await a(e);return R.set(c,n),n}function ue(e){const{createOptions:a,connectorFactory:t,ecosystem:c}=e,n=c?c.id:"inApp",s=M();let r=a,d,l,f,o,u=null;const y=async i=>{if(c){const h=await Ge(c.id),w=h==null?void 0:h.smartAccountOptions;if(w)if(h.smartAccountOptions.executionMode==="EIP7702")r={...r,executionMode:{mode:"EIP7702",sponsorGas:w.sponsorGas}};else{const{defaultChainId:m}=h.smartAccountOptions,C=i.chain??(m?v(m):void 0);if(!C)throw new Error("A chain must be provided either via 'chain' in connect options or 'defaultChainId' in ecosystem configuration. Please pass it via connect() or update the ecosystem configuration.");r={...r,smartAccount:{chain:C,sponsorGas:w.sponsorGas,factoryAddress:w.accountFactoryAddress}}}}};return{id:n,getAuthToken:()=>u,subscribe:s.subscribe,getChain(){if(f)return f=q(f.id)||f,f},getConfig:()=>r,getAccount:()=>d,autoConnect:async i=>{const{autoConnectInAppWallet:h}=await _(async()=>{const{autoConnectInAppWallet:p}=await import("./index-CaOpr-Oa.js");return{autoConnectInAppWallet:p}},__vite__mapDeps([3,1,2,4,5,6,7,8])),w=await D(i.client,t,c);await y(i);const{account:g,chain:m,adminAccount:C}=await h(i,r,w);o=i.client,d=g,l=C,f=m;try{u=await w.storage.getAuthCookie()}catch(p){console.error("Failed to retrieve auth token:",p),u=null}return E({client:i.client,ecosystem:c,walletType:n,walletAddress:d.address,chainId:f.id}),d},connect:async i=>{const{connectInAppWallet:h}=await _(async()=>{const{connectInAppWallet:p}=await import("./index-CaOpr-Oa.js");return{connectInAppWallet:p}},__vite__mapDeps([3,1,2,4,5,6,7,8])),w=await D(i.client,t,c);await y(i);const{account:g,chain:m,adminAccount:C}=await h(i,r,w);o=i.client,d=g,l=C,f=m;try{u=await w.storage.getAuthCookie()}catch(p){console.error("Failed to retrieve auth token:",p),u=null}return E({client:i.client,ecosystem:c,walletType:n,walletAddress:d.address,chainId:f.id}),d},disconnect:async()=>{if(o&&!(await(await D(o,t,c)).logout()).success)throw new Error("Failed to logout");d=void 0,l=void 0,f=void 0,u=null,s.emit("disconnect",void 0)},switchChain:async i=>{var h;if((r!=null&&r.smartAccount||((h=r==null?void 0:r.executionMode)==null?void 0:h.mode)==="EIP4337")&&o&&d){const{autoConnectInAppWallet:w}=await _(async()=>{const{autoConnectInAppWallet:b}=await import("./index-CaOpr-Oa.js");return{autoConnectInAppWallet:b}},__vite__mapDeps([3,1,2,4,5,6,7,8])),g=await D(o,t,c);await y({chain:i});const{account:m,chain:C,adminAccount:p}=await w({chain:i,client:o},r,g);l=p,d=m,f=C}else f=i;s.emit("chainChanged",i)},getAdminAccount:()=>l}}function xe(...e){const[a,t]=e,c={id:a,partnerId:t==null?void 0:t.partnerId};return ue({ecosystem:c,createOptions:{auth:{...t==null?void 0:t.auth,options:[]},partnerId:c.partnerId},connectorFactory:async n=>{const{InAppWebConnector:s}=await _(async()=>{const{InAppWebConnector:r}=await import("./web-connector-BxuWsPze.js");return{InAppWebConnector:r}},__vite__mapDeps([9,1,2,10,4,11,8,12,6,13,14]));return new s({client:n,ecosystem:c,storage:t==null?void 0:t.storage})}})}function Ze(e){return ue({createOptions:e,connectorFactory:async a=>{var c;const{InAppWebConnector:t}=await _(async()=>{const{InAppWebConnector:n}=await import("./web-connector-BxuWsPze.js");return{InAppWebConnector:n}},__vite__mapDeps([9,1,2,10,4,11,8,12,6,13,14]));return new t({client:a,passkeyDomain:(c=e==null?void 0:e.auth)==null?void 0:c.passkeyDomain,storage:e==null?void 0:e.storage})}})}class Je extends F{constructor({domain:a}){super(`Invalid domain "${te(a)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ye extends F{constructor({primaryType:a,types:t}){super(`Invalid primary type \`${a}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Qe extends F{constructor({type:a}){super(`Struct type "${a}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Xe(e){const{domain:a,message:t,primaryType:c,types:n}=e,s=(l,f)=>{const o={...f};for(const u of l){const{name:y,type:i}=u;i==="address"&&(o[y]=o[y].toLowerCase())}return o},r=n.EIP712Domain?a?s(n.EIP712Domain,a):{}:{},d=(()=>{if(c!=="EIP712Domain")return s(n[c],t)})();return te({domain:r,message:d,primaryType:c,types:n})}function en(e){const{domain:a,message:t,primaryType:c,types:n}=e,s=(r,d)=>{for(const l of r){const{name:f,type:o}=l,u=d[f],y=o.match(Se);if(y&&(typeof u=="number"||typeof u=="bigint")){const[w,g,m]=y;Te(u,{signed:g==="int",size:Number.parseInt(m)/8})}if(o==="address"&&typeof u=="string"&&!De(u))throw new We({address:u});const i=o.match(Le);if(i){const[w,g]=i;if(g&&$(u)!==Number.parseInt(g))throw new Re({expectedSize:Number.parseInt(g),givenSize:$(u)})}const h=n[o];h&&(tn(o),s(h,u))}};if(n.EIP712Domain&&a){if(typeof a!="object")throw new Je({domain:a});s(n.EIP712Domain,a)}if(c!=="EIP712Domain")if(n[c])s(n[c],t);else throw new Ye({primaryType:c,types:n})}function nn({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function tn(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Qe({type:e})}function an(e){if(typeof window>"u")return;const a=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",a),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",a)}function cn(){const e=new Set;let a=[];const t=()=>an(n=>{a.some(({info:s})=>s.uuid===n.info.uuid)||(a=[...a,n],e.forEach(s=>s(a,{added:[n]})))});let c=t();return{_listeners(){return e},clear(){e.forEach(n=>n([],{removed:[...a]})),a=[]},destroy(){this.clear(),e.clear(),c==null||c()},findProvider({rdns:n}){return a.find(s=>s.info.rdns===n)},getProviders(){return a},reset(){this.clear(),c==null||c(),c=t()},subscribe(n,{emitImmediately:s}={}){return e.add(n),s&&n(a,{added:a}),()=>e.delete(n)}}}const K=se()?cn():void 0;function le(e){const a=fe().find(t=>t.info.rdns===e);return a==null?void 0:a.provider}function sn(){if(K)return K}function fe(){var a;const e=((a=sn())==null?void 0:a.getProviders())||[];for(const t of e)if(t.info.rdns==="io.metamask.mobile"){t.info.rdns=qe;break}return e}const H=Object.freeze(Object.defineProperty({__proto__:null,getInstalledWalletProviders:fe,injectedProvider:le},Symbol.toStringTag,{value:"Module"}));function O(e){const a=le(e);if(!a)throw new Error(`No injected provider found for wallet: "${e}"`);return a}async function rn({id:e,provider:a,emitter:t,client:c,chain:n}){var y,i;let s,d=0;for(;!(s!=null&&s[0])&&d<3;){try{s=await a.request({method:"eth_requestAccounts"})}catch(h){if(console.error(h),(i=(y=dn(h))==null?void 0:y.toLowerCase())!=null&&i.includes("rejected"))throw h;await new Promise(w=>setTimeout(w,500))}d++}const l=s==null?void 0:s[0];if(!l)throw new Error("Failed to connect to wallet, no accounts available");const f=I(l),o=await a.request({method:"eth_chainId"}).then(P).catch(h=>{throw new Error("Error reading chainId from provider",h)});let u=n&&n.id===o?n:v(o);try{n&&typeof n.id<"u"&&n.id!==o&&(await we(a,n),u=n)}catch{console.warn(`Error switching to chain ${n==null?void 0:n.id} - defaulting to wallet chain (${o})`)}return he({provider:a,address:f,chain:u,emitter:t,client:c,id:e})}async function on({id:e,provider:a,emitter:t,client:c,chain:n}){const r=(await a.request({method:"eth_accounts"}))[0];if(!r)throw new Error("Failed to connect to wallet, no accounts available");const d=I(r),l=await a.request({method:"eth_chainId"}).then(P),f=n&&n.id===l?n:v(l);return he({provider:a,address:d,chain:f,emitter:t,client:c,id:e})}function B({provider:e,address:a,client:t,id:c}){const n={address:I(a),async sendTransaction(s){const d=[{...s.gasPrice?{gasPrice:s.gasPrice?A(s.gasPrice):void 0}:{maxFeePerGas:s.maxFeePerGas?A(s.maxFeePerGas):void 0,maxPriorityFeePerGas:s.maxPriorityFeePerGas?A(s.maxPriorityFeePerGas):void 0},nonce:s.nonce?A(s.nonce):void 0,accessList:s.accessList,value:s.value?A(s.value):void 0,gas:s.gas?A(s.gas):void 0,from:this.address,to:s.to?I(s.to):void 0,data:s.data,...s.eip712}];try{const l=await e.request({method:"eth_sendTransaction",params:d});return ne({client:t,chainId:s.chainId,walletAddress:I(a),walletType:c,transactionHash:l,contractAddress:s.to??void 0,gasPrice:s.gasPrice}),{transactionHash:l}}catch(l){throw Oe(l)&&Me({client:t,error:l,walletAddress:I(a),chainId:s.chainId,contractAddress:s.to||void 0,transactionValue:s.value}),l}},async signMessage({message:s}){if(!n.address)throw new Error("Provider not setup");const r=typeof s=="string"?Q(s):s.raw instanceof Uint8Array?X(s.raw):s.raw;return await e.request({method:"personal_sign",params:[r,I(n.address)]})},async signTypedData(s){if(!e||!n.address)throw new Error("Provider not setup");const r=ae(s),{domain:d,message:l,primaryType:f}=r,o={EIP712Domain:nn({domain:d}),...r.types};en({domain:d,message:l,primaryType:f,types:o});const u=Xe({domain:d??{},message:l,primaryType:f,types:o});return await e.request({method:"eth_signTypedData_v4",params:[I(n.address),u]})},async watchAsset(s){return await e.request({method:"wallet_watchAsset",params:s},{retryCount:0})}};return n}async function he({provider:e,address:a,chain:t,emitter:c,client:n,id:s}){const r=B({provider:e,address:a,client:n,id:s});async function d(){e.removeListener("accountsChanged",f),e.removeListener("chainChanged",o),e.removeListener("disconnect",l)}async function l(){d(),c.emit("disconnect",void 0)}function f(u){if(u[0]){const y=B({provider:e,address:I(u[0]),client:n,id:s});c.emit("accountChanged",y),c.emit("accountsChanged",u)}else l()}function o(u){const y=v(P(u));c.emit("chainChanged",y)}return e.on&&(e.on("accountsChanged",f),e.on("chainChanged",o),e.on("disconnect",l)),[r,t,l,u=>we(e,u)]}async function we(e,a){var c;const t=A(a.id);try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch{const n=await Y(a);await e.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:ce(n),blockExplorerUrls:(c=n.explorers)==null?void 0:c.map(s=>s.url)}]})}}function dn(e){return e instanceof Error?e.message:typeof e=="string"?e:typeof e=="object"&&e!==null?JSON.stringify(e):String(e)}const G=Object.freeze(Object.defineProperty({__proto__:null,autoConnectEip1193Wallet:on,connectEip1193Wallet:rn,getInjectedProvider:O},Symbol.toStringTag,{value:"Module"}));function un(...e){const[a,t]=e;switch(!0){case a==="smart":return be(t);case(a==="embedded"||a==="inApp"):return Ze(t);case Ie(a):return xe(...e);case a===T:{const c=t;return Ne({createOptions:c,providerFactory:()=>oe(c),onConnectRequested:async n=>{const{showCoinbasePopup:s}=await _(async()=>{const{showCoinbasePopup:r}=await Promise.resolve().then(()=>Ke);return{showCoinbasePopup:r}},void 0);return s(n)}})}default:{let d=function(){n=void 0,s=void 0};const c=M();let n,s,r,l=async()=>{};const f=c.subscribe("disconnect",()=>{d(),r==null||r(),f()});c.subscribe("accountChanged",i=>{n=i});let o=async()=>{throw new Error("Not implemented yet")};const u=$e()?i=>je(i):void 0,y={id:a,subscribe:c.subscribe,getConfig:()=>e[1],getChain(){if(s)return s=q(s.id)||s,s},getAccount:()=>n,autoConnect:async i=>{const{injectedProvider:h}=await _(async()=>{const{injectedProvider:w}=await Promise.resolve().then(()=>H);return{injectedProvider:w}},void 0);if(a!=="walletConnect"&&h(a)){const{autoConnectEip1193Wallet:w}=await _(async()=>{const{autoConnectEip1193Wallet:b}=await Promise.resolve().then(()=>G);return{autoConnectEip1193Wallet:b}},void 0),[g,m,C,p]=await w({id:a,provider:O(a),emitter:c,chain:i.chain,client:i.client});return n=g,s=m,l=C,o=p,r=c.subscribe("chainChanged",b=>{s=b}),E({client:i.client,walletType:a,walletAddress:n.address,chainId:s.id}),n}if(i&&"client"in i){const{autoConnectWC:w}=await _(async()=>{const{autoConnectWC:b}=await import("./controller-Br5fDtAr.js");return{autoConnectWC:b}},__vite__mapDeps([15,1,2,6,14,16,17])),[g,m,C,p]=await w(i,c,y.id,j,u);return n=g,s=m,l=C,o=p,E({client:i.client,walletType:a,walletAddress:n.address,chainId:s.id}),n}throw new Error("Failed to auto connect")},connect:async i=>{async function h(m){const{connectWC:C}=await _(async()=>{const{connectWC:me}=await import("./controller-Br5fDtAr.js");return{connectWC:me}},__vite__mapDeps([15,1,2,6,14,16,17])),[p,b,W,S]=await C(m,c,y.id,j,u);return n=p,s=b,l=W,o=S,E({client:m.client,walletType:a,walletAddress:n.address,chainId:s.id}),n}if(a==="walletConnect"){const{client:m,chain:C,...p}=i;return h({client:m,chain:C,walletConnect:{...p}})}const w=i&&"walletConnect"in i,{injectedProvider:g}=await _(async()=>{const{injectedProvider:m}=await Promise.resolve().then(()=>H);return{injectedProvider:m}},void 0);if(g(a)&&!w){const{connectEip1193Wallet:m}=await _(async()=>{const{connectEip1193Wallet:S}=await Promise.resolve().then(()=>G);return{connectEip1193Wallet:S}},void 0),[C,p,b,W]=await m({id:a,provider:O(a),client:i.client,chain:i.chain,emitter:c});return n=C,s=p,l=b,o=W,r=c.subscribe("chainChanged",S=>{s=S}),E({client:i.client,walletType:a,walletAddress:n.address,chainId:s.id}),n}if(i&&"client"in i)return h(i);throw new Error("Failed to connect")},disconnect:async()=>{d(),await l()},switchChain:i=>o(i)};return y}}}function In(){const a=ee("useActiveWallet").activeWalletStore;return Ae.useSyncExternalStore(a.subscribe,a.getValue,a.getValue)}function bn(){return{disconnect:ee("useDisconnect").disconnectWallet}}const x=e=>{let a;const t=new Set,c=(f,o)=>{const u=typeof f=="function"?f(a):f;if(!Object.is(u,a)){const y=a;a=o??(typeof u!="object"||u===null)?u:Object.assign({},a,u),t.forEach(i=>i(a,y))}},n=()=>a,d={setState:c,getState:n,getInitialState:()=>l,subscribe:f=>(t.add(f),()=>t.delete(f))},l=a=e(c,n,d);return d},ln=e=>e?x(e):x,fn=e=>e;function hn(e,a=fn){const t=N.useSyncExternalStore(e.subscribe,()=>a(e.getState()),()=>a(e.getInitialState()));return N.useDebugValue(t),t}const Z=e=>{const a=ln(e),t=c=>hn(a,c);return Object.assign(t,a),t},wn=e=>e?Z(e):Z,An=wn((e,a)=>({account:null,isLoggedIn:!1,isLoading:!0,initialize:async()=>{const t=localStorage.getItem("loggedInAddress");if(t)try{const n=await un("io.metamask").getAccount();n&&n.address===t?e({account:n,isLoggedIn:!0,isLoading:!1}):e({isLoading:!1})}catch(c){console.error("Failed to restore wallet connection:",c),e({isLoading:!1})}else e({isLoading:!1})},onAccountChange:t=>{if(t===void 0){a().logout();return}e({account:t,isLoggedIn:!0}),localStorage.setItem("loggedInAddress",t.address)},login:t=>{e({account:t,isLoggedIn:!0,isLoading:!1}),localStorage.setItem("loggedInAddress",t.address)},logout:()=>{localStorage.removeItem("loggedInAddress"),e({account:null,isLoggedIn:!1,isLoading:!1})}}));export{T as C,qe as M,Cn as R,_n as Z,In as a,bn as b,un as c,Fe as d,ke as e,V as f,fe as g,ce as h,$e as i,nn as j,D as k,Ge as l,z as m,P as n,je as o,H as p,Xe as s,An as u,en as v};
