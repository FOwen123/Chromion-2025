import{r as i,g as O,c as U,j as e,R as Y,t as m}from"./index-anYD-FGg.js";import{s as E,B as $}from"./badge-B4HGYicW.js";import{c as A,a as Z,C as R,b as D,d as ee,e as te,f as se}from"./createLucideIcon-DyRFF-zW.js";import{c as ne,B as _}from"./index-BPYKPm2Y.js";import{s as B,L as N,S as ae}from"./separator-BLPDsuiq.js";import{r as re}from"./read-contract-Cc_S5oDR.js";import{u as ie}from"./useActiveAccount-CVe1qF18.js";import{A as q}from"./arrow-right-CcJQBOrm.js";import{C as oe}from"./clock-D8YGGCtc.js";import{p as z}from"./to-serializable-transaction-CBqCJM9h.js";import{s as H}from"./send-transaction-B8v_N8Fr.js";import"./stringify-cJu1y5js.js";const ce=[{inputs:[{name:"messageId",type:"bytes32"}],name:"getExecutionState",outputs:[{name:"",type:"uint8"}],stateMutability:"view",type:"function"}],de="0x000b26f604eAadC3D874a4404bde6D64a97d95ca";function le(y,f="sepolia",h="sepolia"){const[t,T]=i.useState({status:"NOT_STARTED",currentStep:0,totalSteps:7}),[g,w]=i.useState(!1),l=i.useCallback(a=>{const o={NOT_STARTED:{step:0,description:"Transaction not yet initiated",emoji:"⏳"},SOURCE_FINALIZED:{step:1,description:"Source transaction finalized",emoji:"✅"},COMMITTING:{step:2,description:"CCIP committing to destination chain",emoji:"📝"},COMMITTED:{step:3,description:"Message committed to destination",emoji:"📋"},BLESSING:{step:4,description:"Risk Management Network verification",emoji:"🛡️"},BLESSED:{step:5,description:"Message verified and blessed",emoji:"✨"},EXECUTING:{step:6,description:"Executing on destination chain",emoji:"⚡"},SUCCESS:{step:7,description:"Cross-chain transfer complete!",emoji:"🎉"},FAILED:{step:-1,description:"Transfer failed",emoji:"❌"}};return o[a]||o.NOT_STARTED},[]),x=i.useCallback(async a=>{try{const o=O({client:U,chain:B,address:de,abi:ce}),j=await re({contract:o,method:"getExecutionState",params:[a]});switch(Number(j)){case 0:return"COMMITTING";case 1:return"EXECUTING";case 2:return"SUCCESS";case 3:return"FAILED";default:return"NOT_STARTED"}}catch(o){return console.error("Error checking CCIP status:",o),"COMMITTING"}},[]),C=i.useCallback(async a=>{if(!a||g)return;w(!0);const o=Date.now(),j=[{status:"SOURCE_FINALIZED",delay:2e3},{status:"COMMITTING",delay:5e3},{status:"COMMITTED",delay:8e3},{status:"BLESSING",delay:12e3},{status:"BLESSED",delay:15e3},{status:"EXECUTING",delay:18e3}];try{for(const u of j){await new Promise(b=>setTimeout(b,u.delay));const d=await x(a),I=l(u.status);if(T(b=>({...b,status:u.status,currentStep:I.step,estimatedTimeRemaining:Math.max(0,25e3-(Date.now()-o))})),d==="SUCCESS"||d==="FAILED"){const b=l(d);T(P=>({...P,status:d,currentStep:b.step,estimatedTimeRemaining:0,errorMessage:d==="FAILED"?"Cross-chain transfer failed":void 0}));break}}const r=await x(a);if(r!=="SUCCESS"&&r!=="FAILED"){const u=l("SUCCESS");T(d=>({...d,status:"SUCCESS",currentStep:u.step,estimatedTimeRemaining:0}))}}catch(r){console.error("Error during CCIP polling:",r);const u=l("FAILED");T(d=>({...d,status:"FAILED",currentStep:u.step,estimatedTimeRemaining:0,errorMessage:"Error tracking CCIP transaction"}))}finally{w(!1)}},[x,l,g]);i.useEffect(()=>{y&&!g&&C(y)},[y,C,g]);const k=i.useCallback(()=>Math.round(t.currentStep/t.totalSteps*100),[t.currentStep,t.totalSteps]),n=i.useCallback(a=>({SOURCE_FINALIZED:"~15 minutes (Sepolia finality)",COMMITTING:"~2-5 minutes",COMMITTED:"~1-2 minutes",BLESSING:"~30 seconds",BLESSED:"~10 seconds",EXECUTING:"~30 seconds",SUCCESS:"Complete",FAILED:"Failed",NOT_STARTED:"Not started"})[a]||"Unknown",[]);return{progress:t,isPolling:g,getStepInfo:l,getProgressPercentage:k,getTimeEstimate:n,startTracking:a=>C(a)}}const V={smartContractAddress:"0x05Bc05725AE7dF7BfDd94891F138Aae0f0a2C689",abi:[[{inputs:[{internalType:"address",name:"_router",type:"address"},{internalType:"address",name:"_link",type:"address"},{internalType:"address",name:"_usdcToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"AddressInsufficientBalance",type:"error"},{inputs:[{internalType:"uint64",name:"destinationChainSelector",type:"uint64"}],name:"DestinationChainNotWhitelisted",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[{internalType:"uint256",name:"currentBalance",type:"uint256"},{internalType:"uint256",name:"requiredAmount",type:"uint256"}],name:"InsufficientTokenBalance",type:"error"},{inputs:[],name:"InvalidLinkToken",type:"error"},{inputs:[],name:"InvalidReceiverAddress",type:"error"},{inputs:[],name:"InvalidRouter",type:"error"},{inputs:[],name:"InvalidUsdcToken",type:"error"},{inputs:[{internalType:"uint256",name:"currentBalance",type:"uint256"},{internalType:"uint256",name:"calculatedFees",type:"uint256"}],name:"NotEnoughBalance",type:"error"},{inputs:[],name:"NothingToWithdraw",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"orderId",type:"bytes32"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"PaymentProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"messageId",type:"bytes32"},{indexed:!0,internalType:"uint64",name:"destinationChainSelector",type:"uint64"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"feeToken",type:"address"},{indexed:!1,internalType:"uint256",name:"fees",type:"uint256"}],name:"TokensTransferred",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_destinationChainSelector",type:"uint64"}],name:"denylistChain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getLinkTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getUsdcTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_destinationChainSelector",type:"uint64"},{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_seller",type:"address"}],name:"transferTokensPayLINK",outputs:[{internalType:"bytes32",name:"messageId",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_destinationChainSelector",type:"uint64"}],name:"whitelistChain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"whitelistedChains",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_beneficiary",type:"address"}],name:"withdrawLinkToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_beneficiary",type:"address"}],name:"withdrawUsdcToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]]};/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],L=A("CircleAlert",pe);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],M=A("CircleCheckBig",ue);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],X=A("Package",me);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],F=A("RefreshCw",ye),fe=ne("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function S({className:y,variant:f,...h}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Z(fe({variant:f}),y),...h})}function v({className:y,...f}){return e.jsx("div",{"data-slot":"alert-description",className:Z("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",y),...f})}const Ie=function(){const{paymentId:f}=Y.useSearch(),h=ie(),[t,T]=i.useState(null),[g,w]=i.useState(!0),[l,x]=i.useState(!1),[C,k]=i.useState(null),[n,a]=i.useState("escrowed"),[o,j]=i.useState(null),{progress:r,isPolling:u,getStepInfo:d,getProgressPercentage:I,getTimeEstimate:b,startTracking:P}=le(o||void 0);i.useEffect(()=>{(async()=>{if(r.status==="SUCCESS"&&t&&n==="confirming")try{const{error:p}=await E.from("payments").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",t.id);if(p)throw p;a("completed"),m.success("🎉 Cross-chain transfer completed successfully!")}catch(p){console.error("Failed to update payment status:",p)}else r.status==="FAILED"&&t&&n==="confirming"&&(a("escrowed"),m.error("❌ Cross-chain transfer failed. Please try again."))})()},[r.status,t,n]);const G=i.useCallback(async()=>{if(!f){k("No payment ID provided"),w(!1);return}try{const{data:s,error:p}=await E.from("payments").select(`
          *,
          payment_links!inner(
            id,
            title,
            description,
            creator_wallet,
            short_id
          )
        `).eq("id",f).single();if(p)throw p;console.log("Payment data:",s),T(s);let c="escrowed";switch(s.status){case"pending_delivery":case"escrowed":c="escrowed";break;case"confirming":c="confirming";break;case"completed":c="completed";break;case"refunded":c="refunded";break;default:c="escrowed"}a(c)}catch(s){console.error("Error fetching payment:",s),k("Payment not found or unable to load")}finally{w(!1)}},[f]);i.useEffect(()=>{G()},[G]);const K=async()=>{if(!(!t||!h)){x(!0),a("confirming");try{m.info("🚀 Initiating cross-chain delivery..."),await E.from("payments").update({status:"confirming",updated_at:new Date().toISOString()}).eq("id",t.id);const s=O({client:U,chain:B,address:V.smartContractAddress}),p=z({contract:s,method:"function transferTokensPayLINK(uint64 _destinationChainSelector, address _receiver, uint256 _amount, address _seller) returns (bytes32 messageId)",params:[BigInt("14767482510784806043"),t.payment_links.creator_wallet,BigInt(Math.floor(t.amount*1e6)),t.payment_links.creator_wallet]}),c=await H({transaction:p,account:h});console.log("✅ CCIP Transfer transaction sent:",c),j(c.transactionHash),m.success("✅ CCIP transfer initiated! Tracking cross-chain progress..."),P(c.transactionHash)}catch(s){console.error("Delivery confirmation failed:",s),m.error(`Failed to confirm delivery: ${s instanceof Error?s.message:"Unknown error"}`),a("escrowed")}finally{x(!1)}}},W=async()=>{if(!(!t||!h)){x(!0);try{m.info("Processing refund...");const s=O({client:U,chain:B,address:V.smartContractAddress}),p=z({contract:s,method:"function withdrawUsdcToken(address _beneficiary)",params:[t.payer_wallet]}),c=await H({transaction:p,account:h});console.log("✅ Refund transaction sent:",c),await E.from("payments").update({status:"refunded",refunded_at:new Date().toISOString(),refund_tx_hash:c.transactionHash}).eq("id",t.id),a("refunded"),m.success("💰 Refund processed successfully!"),m.success(`Refund Transaction: ${c.transactionHash.slice(0,10)}...`,{action:{label:"View on Etherscan",onClick:()=>window.open(`https://sepolia.etherscan.io/tx/${c.transactionHash}`,"_blank")}})}catch(s){console.error("Refund failed:",s),m.error(`Failed to process refund: ${s instanceof Error?s.message:"Unknown error"}`)}finally{x(!1)}}},J=s=>{switch(s){case"escrowed":return e.jsx(oe,{className:"h-5 w-5 text-yellow-500"});case"confirming":return e.jsx(N,{className:"h-5 w-5 text-blue-500 animate-spin"});case"completed":return e.jsx(M,{className:"h-5 w-5 text-green-500"});case"refunded":return e.jsx(F,{className:"h-5 w-5 text-orange-500"});default:return e.jsx(L,{className:"h-5 w-5 text-gray-500"})}},Q=s=>{switch(s){case"escrowed":return"Funds in Escrow";case"confirming":return"Confirming Delivery";case"completed":return"Delivery Completed";case"refunded":return"Refunded";default:return"Unknown Status"}};return g?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(R,{className:"w-full max-w-md",children:e.jsx(D,{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading payment details..."})]})})})}):C||!t?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(R,{className:"w-full max-w-md",children:e.jsx(D,{className:"py-8",children:e.jsxs(S,{children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx(v,{children:C||"Payment not found"})]})})})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(R,{className:"w-full max-w-2xl",children:[e.jsxs(ee,{className:"text-center",children:[e.jsx(te,{className:"text-2xl font-bold",children:"Process Payment"}),e.jsx(se,{children:"Manage your escrowed payment and confirm delivery"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary",children:[t.amount," ",t.currency]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.payment_links.title})]}),e.jsx(ae,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"From:"}),e.jsxs("div",{className:"font-mono text-xs bg-muted px-2 py-1 rounded mt-1",children:[t.payer_wallet.slice(0,6),"...",t.payer_wallet.slice(-4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"To:"}),e.jsxs("div",{className:"font-mono text-xs bg-muted px-2 py-1 rounded mt-1",children:[t.payment_links.creator_wallet.slice(0,6),"...",t.payment_links.creator_wallet.slice(-4)]})]})]}),t.tx_hash&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Transaction:"}),e.jsxs("div",{className:"font-mono text-xs bg-muted px-2 py-1 rounded mt-1 flex items-center justify-between",children:[e.jsxs("span",{children:[t.tx_hash.slice(0,10),"...",t.tx_hash.slice(-6)]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>window.open(`https://sepolia.etherscan.io/tx/${t.tx_hash}`,"_blank"),children:"View"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[J(n),e.jsx($,{variant:n==="completed"?"default":n==="refunded"?"destructive":"secondary",children:Q(n)})]}),(n==="confirming"||u)&&o&&e.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg border",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cross-Chain Transfer in Progress"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d(r.status).description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Estimated time: ",b(r.status)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[e.jsxs("span",{children:["Step ",r.currentStep," of ",r.totalSteps]}),e.jsxs("span",{children:[I(),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${I()}%`}})})]}),e.jsx("div",{className:"flex justify-center space-x-2",children:e.jsxs($,{variant:r.status==="SUCCESS"?"default":r.status==="FAILED"?"destructive":"secondary",className:"text-xs",children:[d(r.status).emoji," ",r.status.replace("_"," ")]})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"CCIP Message ID:"}),e.jsxs("p",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded",children:[o.slice(0,10),"...",o.slice(-8)]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>window.open(`https://ccip.chain.link/msg/${o}`,"_blank"),children:"View on CCIP Explorer"})]}),r.errorMessage&&e.jsxs(S,{className:"border-red-500 bg-red-50 dark:bg-red-950",children:[e.jsx(L,{className:"h-4 w-4 text-red-500"}),e.jsx(v,{className:"text-red-700 dark:text-red-300",children:r.errorMessage})]})]}),n!=="confirming"&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:`flex items-center space-x-1 ${n!=="refunded"?"text-green-500":""}`,children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{children:"Escrowed"})]}),e.jsx(q,{className:"h-3 w-3"}),e.jsxs("div",{className:`flex items-center space-x-1 ${n==="completed"?"text-green-500":""}`,children:[e.jsx(X,{className:"h-3 w-3"}),e.jsx("span",{children:"Delivery"})]}),e.jsx(q,{className:"h-3 w-3"}),e.jsxs("div",{className:`flex items-center space-x-1 ${n==="completed"?"text-green-500":""}`,children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{children:"Completed"})]})]})]}),n==="escrowed"&&e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_,{onClick:K,disabled:l,className:"flex-1",size:"lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Confirm Delivery"]})}),e.jsx(_,{onClick:W,disabled:l,variant:"outline",className:"flex-1",size:"lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Request Refund"]})})]}),n==="confirming"&&!o&&e.jsxs(S,{children:[e.jsx(N,{className:"h-4 w-4 animate-spin"}),e.jsx(v,{children:"Initializing cross-chain transfer..."})]}),n==="completed"&&e.jsxs(S,{className:"border-green-500 bg-green-50 dark:bg-green-950",children:[e.jsx(M,{className:"h-4 w-4 text-green-500"}),e.jsx(v,{className:"text-green-700 dark:text-green-300",children:"Payment has been successfully delivered to the recipient!"})]}),n==="refunded"&&e.jsxs(S,{className:"border-orange-500 bg-orange-50 dark:bg-orange-950",children:[e.jsx(F,{className:"h-4 w-4 text-orange-500"}),e.jsx(v,{className:"text-orange-700 dark:text-orange-300",children:"Payment has been refunded to your wallet."})]})]})]})})};export{Ie as component};
